{% extends "menu/base.html" %}
{% load static %}
{% block title %}‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏ï‡πä‡∏∞‡∏ß‡πà‡∏≤‡∏á{% endblock %}

{% block content %}
    
    <section class="relative py-24 md:py-36 bg-gray-50 min-h-screen flex items-center overflow-hidden">
        <div class="absolute inset-0">
            <div class="w-full h-full bg-amber-50 opacity-50"></div>
        </div>
        
        <div class="relative max-w-7xl mx-auto px-4 text-center w-full">
            <h1 class="text-4xl md:text-5xl font-extrabold text-amber-700 mb-4">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏ï‡πä‡∏∞‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h1>
            <p class="text-xl md:text-2xl text-gray-700 max-w-3xl mx-auto mb-12">
                ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏ï‡πä‡∏∞‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ({{ current_date|date:"j M Y" }})
            </p>

            <div class="max-w-4xl mx-auto p-6 md:p-10 rounded-2xl shadow-3xl bg-white border border-amber-100 transition duration-500 hover:shadow-4xl">
                
                <h2 class="text-3xl font-bold mb-8 text-gray-800 border-b-2 border-amber-200 pb-4">
                    <span class="{% if tables_available > 0 %}text-green-600{% else %}text-red-600{% endif %}">
                        {% if tables_available > 0 %}
                            üü¢ {{ tables_available }} ‡πÇ‡∏ï‡πä‡∏∞‡∏ß‡πà‡∏≤‡∏á! 
                        {% else %}
                            üî¥ ‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß!
                        {% endif %}
                    </span>
                    <span class="text-lg font-normal text-gray-500">(‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î {{ max_tables }} ‡πÇ‡∏ï‡πä‡∏∞)</span>
                </h2>
                
                <div class="flex justify-center space-x-8 text-base mb-10 font-medium">
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-green-500 rounded-full mr-2 shadow-sm"></span>
                        <span class="text-gray-600">‡πÇ‡∏ï‡πä‡∏∞‡∏ß‡πà‡∏≤‡∏á</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-red-500 rounded-full mr-2 shadow-sm"></span>
                        <span class="text-gray-600">‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</span>
                    </div>
                </div>

                <div class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6 p-6 border-4 border-amber-300 rounded-xl bg-white shadow-inner">
                    
                    {% for status in table_status_list %}
                        
                        {% if status.is_reserved %}
                            <div class="p-3 rounded-lg shadow-xl border-2 border-red-500 bg-red-100 text-left relative group cursor-default transform hover:scale-105 transition duration-200">
                                <p class="text-red-700 font-extrabold text-2xl">{{ status.table_id }}</p>
                                <p class="text-red-500 text-xs mt-1">‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß:</p>
                                <p class="text-red-800 font-semibold truncate text-sm leading-tight">{{ status.reservation.name }}</p>
                                
                                <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 w-max p-4 bg-gray-800 text-white text-sm rounded-lg shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10 before:content-[''] before:absolute before:top-full before:left-1/2 before:-translate-x-1/2 before:border-8 before:border-transparent before:border-t-gray-800">
                                    <p class="font-bold mb-1 border-b border-gray-600 pb-1">{{ status.table_id }} - ‡∏à‡∏≠‡∏á‡πÇ‡∏î‡∏¢</p>
                                    ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: {{ status.reservation.name }}<br>
                                    ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {{ status.reservation.party_size }} ‡∏ó‡πà‡∏≤‡∏ô<br>
                                    ‡πÄ‡∏ß‡∏•‡∏≤: {{ status.reservation.time|date:"H:i" }} ‡∏ô.
                                </div>
                            </div>
                        {% else %}
                            <a href="{% url 'menu:reservation' %}" class="p-3 rounded-lg shadow-md border-2 border-green-500 bg-green-100 hover:bg-green-200 transition cursor-pointer flex flex-col justify-center items-center transform hover:scale-105 duration-200">
                                <p class="text-green-700 font-extrabold text-2xl">{{ status.table_id }}</p>
                                <p class="text-green-500 text-xs font-semibold mt-1">‡∏ß‡πà‡∏≤‡∏á</p>
                            </a>
                        {% endif %}
                        
                    {% endfor %}
                    
                </div>
                
                {% if tables_available > 0 %}
                    <a href="{% url 'menu:reservation' %}" class="mt-10 inline-block bg-amber-600 hover:bg-amber-700 text-white font-extrabold text-lg py-3 px-10 rounded-xl transition duration-300 shadow-lg transform hover:scale-105">
                        ‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏•‡∏¢
                    </a>
                {% else %}
                    <a href="{% url 'menu:reservation' %}" class="mt-10 inline-block bg-gray-600 hover:bg-gray-700 text-white font-bold text-lg py-3 px-8 rounded-xl transition duration-300 shadow-lg transform hover:scale-105">
                        ‡∏™‡∏±‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô / ‡∏à‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô
                    </a>
                {% endif %}
                
            </div>
            
        </div>
    </section>
    
{% endblock content %}